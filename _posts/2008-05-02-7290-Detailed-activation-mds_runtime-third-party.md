---
layout: post
title: 7290的详细激活(mds_runtime/第三方)
categories:
- 技术
tags: [BB]
status: publish
type: post
info: 上海
published: true
meta: {}
---
7290是台好机器，很好玩的机器——唯一美中不足的是，它自带的浏览器激活是件麻烦事，捣鼓它往往是件比较痛苦的事情。折腾了两天，总算是小有心得。谨将这些猜测和摸索记下，以备不时之需。

##一、为什么要激活自带浏览器？##

其实，7290上的第三方浏览器基本上在不需要激活的情况下都能很好的完成网页浏览的作用，特别是某些修改版，功能比起自带浏览器更舒服。例如BerryMail的完美键盘版的OPERA3.1，还有可以WAP上网的空中OPERA等等。比如，我个人就更喜欢用第三方的浏览器来上网。而且，即使不激活，其实并不影响一些第三方工具的使用（前提是一些需要cmnet的工具，你的卡确实能用cmnet），比如，Gmail、QQ、MSN、EQO、Viigo等等。（注意，用这些工具时，记得删掉Service Book条目中的IPPP，否则很多无法使用）。

但是，以下几个原因，导致很多人孜孜不倦的需要激活自带浏览器（至少我是）：

1. 彩信收发功能。这个是和自带浏览器紧密联系的，想真正的收发彩信，必须激活；

2. 查看邮件附件，以及一些相关的下载功能。很典型，我之所以咬牙激活，很大程度上就是为了能在gmail里面直接下载Viigo；

3. 看到有人提到，自带浏览器对于一些office文档、pdf的附件的阅读能力很不错——这个我没有试过，姑且列在这里。

如果觉得以上几点都没什么需要，完全可以高高兴兴的撇开激活这档子事情:)

##二、激活的原理##

其实关于具体原理，我不是专家，很多时候只是盲人摸象，自己瞎猜的，但是同样只是列出来供参考。

自带浏览器进行上网时，会需要向某个MDS（移动数据服务）服务器发起某种类似握手的请求，等到双方进行过一系列约定好的数据交换后，浏览器才正常的做好了配置和上网的准备，这个就是大致的激活过程（吧？）。

对于水货使用者来说，BB的自带浏览器的MDS（移动数据服务）服务器显然是没有所谓的官方支持了，那么我们就只能依赖热心网友提供的自建的MDS服务器进行这个激活的过程。当然，你自己搭建也是可行的，但是需要有一台稳定可以长期运行的服务器，否则，当你出差在外急需激活的时候......

而且这个数据交换的过程，似乎必须走CMNET连接，这就是为什么我们一定要保证激活过程中要留下了设置了CMNET参数的IPPP条目、以及使用第三方软件的原因（我现在比较倾向于使用MDS_runtime激活的方式，这个后面讲）。

第三方软件例如MSN、QQ在IPPP项存在的情况下，会自己去按照IPPP项配置和MDS服务器发生沟通，结果是虽然自己没登上去，但是却完成了和MDS服务器暗通款曲的过程。稍后再打开自带浏览器，就会发现激活完成。

而MDS_runtime则是更直接的东西，它本来就是用于MDS激活的组件，所以你需要把MDS服务器的地址信息明确填入它的URL中，然后选择激活 ——虽然因为最后因为安全握手的问题失败，但是，对于自带浏览器来说，已经足够，前面来来回回的工作，已经完成了。这个相对于其他第三方来说，我更喜欢它的透明直接，所以哪怕牺牲几百k的空间，也毅然装上了它。

##三 激活步骤##

这个部分基本上就是到处东拼西凑而来，要鸣谢都一时想不起来到底看了哪些了...-_-

太细碎的步骤，我就不赘述了，相信到处都可以看到，主要写下一些我认为容易出问题的部分。

另外，如果是使用mds_runtime的方法，我认为如果以前激活过，也许可以直接跳到3.4步进行激活。但是，不确定，因为目前为止我还没有直接这样试过（因为天津阿土的服务器x现在一直是好的....:)

###3.1 Service Book的准备###

首先，我们需要稳定的MDS服务器，用了这么久，感觉有两个始终是保证了很高的稳定，很多人估计用的都是它们：

http://220.194.104.24:8080         天津阿土黑莓_天津移动测试通过ServiceBook.ipd

http://60.191.54.171:8080           ServiceBook_hz_sjwt.ipd

使用之前，请点击前面的链接，看是否能够打开，以保证这个服务器当前是可用的。然后下载ipd文件备用。

###3.2 Service Book的导入###

这里要注意，SB的导入，前提是必须是这样一个步骤，

1. 先删除自带浏览器；

参考刷机步骤，即安装好ROM文件，并且将C:Program FilesCommon FilesResearch In MotionAppLoader中的Vendor.xml删除。这样才能在桌面管理器中对一些ROM自带应用程序进行添加删除，否则会出现看不到浏览器的情况。

2. 然后恢复准备好的SB的ipd文件；（桌面管理器，“备份和恢复-" 恢复... ”，选择准备的ipd，一路确定即可。)

3. 然后重装自带浏览器。参看步骤1。

NOTE：这三步中最好不要去对Service Book选项做操作，我曾出现过重装浏览器前，delete和undelete了两下SB条目，结果重装后，发现没有载入的情况。

另外，有种说法，在重装之后，建议拔电重启一次，否则会出现没有正确读入Servicebook的情况，但是这一点有时候似乎没有拔电也读入了，但以防万一，还是建议照做吧，另外我觉得，三键重启和断电的效果是一样的。

这时，进入选项-"高级-"Service book,会发现有四条左右条目了，然后就依照管理，选项中undelete，直到所有的条目都出现为止。

建议此时，打开IPPP条目，看看里面的服务器地址是不是我们开始选择的那个idp所对应的地址，以确认是不是正确的导入了SB。

###3.4 开始激活###

进入选项-"高级-"TCP，将APN填为cmnet,其余留空。

"---------------------- 第三方方法 ----------------------"

使用MSN等的人，打开程序，随便填写用户密码，切记去掉使用WAP proxy的选项，然后尝试登录。看到数据传输箭头上下几次之后，开始漫长的等待，直到超时提示出现。基本上激活完成了。

"---------------------- MDS_runtime 方法 -------------"

使用MDS_runtime的人，进入选项-"MDS激活， 将选项-"高级-"Service Book中的IPPP条目的Gateway IP地址复制粘贴到MDS激活的URL中，例如,天津阿土的IPPP,gateway ip是：

//220.194.104.24:19781;19780/cmnet|GPAK,

我们需要在MDS激活的URL中填入：http://220.194.104.24:19781/mds:7080 (请灵活使用BB的多任务切换和复制粘贴功能：），这里的7080是中国移动的cmnet服务端口号。

然后按下滚轮，选择激活。

看见Security Handshake一直停在0%，这很正常，不要理会，继续等待，直到MDS server failure的失败信息出现。OK，我认为这就意味着激活成功了。

###3.5 后续动作###

稍等个一分钟左右，（有时候似乎的确有点延迟）打开自带浏览器，链接主页，看看是不是能从requesting成功到loading状态？看看那个红虚线小框是不是成功变成绿色实线？应该是可以了：）

接下来，如果你是cmnet包月，你只需要把IPPP条目从选项-"高级-"service book中移除即可，这就保证了所有的网络运用都能使用了；如果是cmwap包月，记得把选项-"高级-"TCP里的APN换成CMWAP，否则，账单还是很惊人的。

关于彩信，还需要在选项—高级—浏览器推入里打开启用推入的选项，否则会能发不能收。还有进入选项-MMS选项，将“多媒体接收”和自动检索两项设置为“始终”，将最后“消息过滤”里“拒绝匿名消息”和“拒绝广告”两栏前的勾取消掉，可以防止某些彩信接收不到的情况。

###3.6 重启后的激活###

如果断电重启、软件安装重启、三键复位重启这些情况，都会需要重新激活，但是由于此时的Servicebook不需要重新读入，所以大大的方便了。

只需要进入选项-"高级-"Service Book，undelete，出现IPPP条目，然后重新执行3.4和3.5即可。

##四、 关于MDS_runtime##

mds_tuntime是一个安装在BB上面专门用来配合激活BB自带的浏览器的组件。

具体的安装和下载参见这个经典帖子：

"彻底解决上网不稳定的问题"

http://bbs.maxpda.com/viewthread.php?tid=13351&amp;highlight=%B3%B9%B5%D7%BD%E2%BE%F6

当中有些细节不同，我也并不清楚具体机理，上面的步骤是以我的实际操作为准。

选择MDS_RUNTIME的原因，主要是因为我在使用EQO，所以不再想装MSN或者QQ上来。此外，我也更喜欢这种更透明一些的方法。

另外MDS_RUNTIME的一个更好的地方是，它是可以脱离开Service Book 的ipd文件的，需要激活时，你只需要知道MDS服务器的地址，然后直接按照3.4中的步骤，填入这个地址和19781的端口号，选择激活，就可以完成激活过程。当然，因为自带浏览器的存在是依赖于Service Book的某些条目的，如果我们发现找不到自带浏览器，而且service book选项中也没条目好恢复删除的话，我们仍然需要一个Service Book文件。但是，这些也只是推测，因为我的SB已经载入了，实在不想去恢复初始从头再试了。

我做的试验是这样的，原本是用天津阿土的SB激活。后来断电重启，果然不能上了。进入MDS激活选项，将原来的URL换成了杭州的那个MDS服务器地址，选择激活——激活成功。

而这意味着，我只需要在记事本里记下一堆MDS服务器地址，当某次发现其中一个失效时，只需要换一个ip填入激活就可以了：）

**参考贴**

很多基础和进阶的知识我都是从这个经典帖子而来，强烈推荐每一个入手的新手都能好好的看看：

我的BB我做主——7290完全攻略


